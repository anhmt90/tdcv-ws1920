function J = Jacobian_function2(model3D, nextImage2D, camera_params, t, w)
%JACOBIAN_FUNCTION2
%    J = JACOBIAN_FUNCTION4(X,Y,Z,F,TX,TY,TZ,U0,V0,WX,WY,WZ,X,Y)

%    This function was generated by the Symbolic Math Toolbox version 8.3.
%    11-Dec-2019 04:13:24
J = [];
tx = t(1); ty = t(2); tz = t(3);
wx = w(1); wy = w(2); wz = w(3);
f = camera_params.FocalLength(1);
u0 = camera_params.PrincipalPoint(1);
v0 = camera_params.PrincipalPoint(2);

for i = 1:size(model3D,2)
    X = model3D(1, i); Y = model3D(2, i); Z = model3D(3, i);
    x = nextImage2D(1, i); y = nextImage2D(2, i);

    t2 = conj(wx);
    t3 = conj(wy);
    t4 = conj(wz);
    t5 = wx.^2;
    t6 = wy.^2;
    t7 = wz.^2;
    t8 = t2.^2;
    t9 = t3.^2;
    t10 = t4.^2;
    t14 = t5+t6+t7;
    t11 = t8+t9;
    t12 = t8+t10;
    t13 = t9+t10;
    t16 = sqrt(t14);
    t15 = t10+t11;
    t17 = conj(t16);
    t18 = cos(t17);
    t19 = sin(t17);
    t20 = 1.0./t15;
    t22 = 1.0./t17;
    t21 = t20.^2;
    t23 = t22.^2;
    t24 = t22.^3;
    t25 = t18-1.0;
    t26 = t19.*t22;
    t27 = t2.*t26;
    t28 = t3.*t26;
    t29 = t4.*t26;
    t30 = -t26;
    t31 = t2.*t20.*t25;
    t32 = t3.*t20.*t25;
    t33 = t4.*t20.*t25;
    t37 = t2.*t3.*t18.*t23;
    t38 = t2.*t4.*t18.*t23;
    t39 = t3.*t4.*t18.*t23;
    t40 = t2.*t3.*t19.*t24;
    t41 = t2.*t4.*t19.*t24;
    t42 = t3.*t4.*t19.*t24;
    t43 = t8.*t18.*t23;
    t44 = t9.*t18.*t23;
    t45 = t10.*t18.*t23;
    t46 = t8.*t19.*t24;
    t47 = t9.*t19.*t24;
    t48 = t10.*t19.*t24;
    t73 = t2.*t9.*t21.*t25.*2.0;
    t74 = t3.*t8.*t21.*t25.*2.0;
    t75 = t2.*t10.*t21.*t25.*2.0;
    t76 = t4.*t8.*t21.*t25.*2.0;
    t77 = t3.*t10.*t21.*t25.*2.0;
    t78 = t4.*t9.*t21.*t25.*2.0;
    t79 = t2.*t3.*t4.*t21.*t25.*2.0;
    t80 = t11.*t20.*t25;
    t81 = t12.*t20.*t25;
    t82 = t13.*t20.*t25;
    t86 = t2.*t11.*t21.*t25.*2.0;
    t87 = t2.*t12.*t21.*t25.*2.0;
    t88 = t3.*t11.*t21.*t25.*2.0;
    t89 = t2.*t13.*t21.*t25.*2.0;
    t90 = t3.*t12.*t21.*t25.*2.0;
    t91 = t4.*t11.*t21.*t25.*2.0;
    t92 = t3.*t13.*t21.*t25.*2.0;
    t93 = t4.*t12.*t21.*t25.*2.0;
    t94 = t4.*t13.*t21.*t25.*2.0;
    t34 = t31.*2.0;
    t35 = t32.*2.0;
    t36 = t33.*2.0;
    t49 = -t31;
    t51 = -t32;
    t53 = -t33;
    t55 = t3.*t31;
    t56 = t4.*t31;
    t57 = t4.*t32;
    t58 = -t37;
    t59 = -t38;
    t60 = -t39;
    t61 = -t40;
    t62 = -t41;
    t63 = -t42;
    t64 = -t43;
    t65 = -t44;
    t66 = -t45;
    t67 = -t46;
    t68 = -t47;
    t69 = -t48;
    t83 = t80+1.0;
    t84 = t81+1.0;
    t85 = t82+1.0;
    t104 = t9.*t20.*t27;
    t105 = t8.*t20.*t28;
    t106 = t10.*t20.*t27;
    t107 = t8.*t20.*t29;
    t108 = t10.*t20.*t28;
    t109 = t9.*t20.*t29;
    t110 = t3.*t4.*t20.*t27;
    t111 = t11.*t20.*t27;
    t112 = t12.*t20.*t27;
    t113 = t11.*t20.*t28;
    t114 = t13.*t20.*t27;
    t115 = t12.*t20.*t28;
    t116 = t11.*t20.*t29;
    t117 = t13.*t20.*t28;
    t118 = t12.*t20.*t29;
    t119 = t13.*t20.*t29;
    t50 = -t34;
    t52 = -t35;
    t54 = -t36;
    t70 = t3.*t49;
    t71 = t4.*t49;
    t72 = t4.*t51;
    t95 = Z.*t83;
    t96 = f.*t84;
    t97 = f.*t85;
    t98 = t85.*tx;
    t99 = t84.*ty;
    t100 = t83.*tz;
    t101 = t83.*u0;
    t102 = t83.*v0;
    t120 = t27+t57;
    t121 = t28+t56;
    t122 = t29+t55;
    t151 = t89+t114;
    t152 = t90+t115;
    t153 = t91+t116;
    t192 = t26+t43+t67+t79+t110;
    t193 = t26+t44+t68+t79+t110;
    t194 = t26+t45+t69+t79+t110;
    t199 = t30+t46+t64+t79+t110;
    t200 = t30+t47+t65+t79+t110;
    t201 = t30+t48+t66+t79+t110;
    t205 = t38+t51+t62+t74+t105;
    t206 = t41+t51+t59+t74+t105;
    t207 = t39+t49+t63+t73+t104;
    t208 = t42+t49+t60+t73+t104;
    t209 = t37+t53+t61+t76+t107;
    t210 = t40+t53+t58+t76+t107;
    t211 = t39+t49+t63+t75+t106;
    t212 = t42+t49+t60+t75+t106;
    t213 = t37+t53+t61+t78+t109;
    t214 = t40+t53+t58+t78+t109;
    t215 = t38+t51+t62+t77+t108;
    t216 = t41+t51+t59+t77+t108;
    t103 = -t100;
    t123 = Y.*t120;
    t124 = f.*t121;
    t125 = f.*t122;
    t126 = t122.*tx;
    t127 = t120.*ty;
    t128 = t121.*tz;
    t129 = t120.*u0;
    t130 = t120.*v0;
    t131 = t27+t72;
    t132 = t28+t71;
    t133 = t29+t70;
    t154 = Z.*t153;
    t155 = t153.*tz;
    t167 = t50+t86+t111;
    t168 = t50+t87+t112;
    t169 = t52+t88+t113;
    t170 = t52+t92+t117;
    t171 = t54+t93+t118;
    t172 = t54+t94+t119;
    t195 = X.*t193;
    t197 = t193.*tx;
    t202 = Y.*t199;
    t203 = t199.*ty;
    t218 = X.*t209;
    t219 = X.*t211;
    t220 = Y.*t214;
    t221 = Y.*t216;
    t222 = t209.*tx;
    t223 = t211.*tx;
    t224 = t214.*ty;
    t225 = t216.*ty;
    t134 = X.*t132;
    t135 = -t123;
    t136 = f.*t131;
    t137 = f.*t133;
    t138 = -t124;
    t139 = t132.*tx;
    t140 = -t126;
    t141 = t133.*ty;
    t142 = -t127;
    t143 = t131.*tz;
    t144 = -t128;
    t145 = t132.*u0;
    t146 = -t129;
    t147 = t132.*v0;
    t148 = -t130;
    t156 = -t155;
    t173 = Z.*t167;
    t174 = Z.*t169;
    t175 = t167.*tz;
    t176 = t169.*tz;
    t204 = -t197;
    t217 = -t203;
    t226 = -t219;
    t227 = -t221;
    t228 = -t222;
    t229 = -t224;
    t149 = -t139;
    t150 = -t147;
    t157 = t101+t138;
    t158 = t97+t145;
    t159 = t102+t136;
    t160 = t96+t148;
    t177 = -t173;
    t178 = -t174;
    t179 = -t175;
    t180 = -t176;
    t181 = t137+t146;
    t184 = -Y.*(t129-t137);
    t185 = t100+t139+t142;
    t186 = t99+t140+t143;
    t187 = t98+t141+t144;
    t233 = t156+t223+t225;
    t161 = X.*t158;
    t162 = Z.*t157;
    t163 = Y.*t160;
    t164 = Z.*t159;
    t182 = t125+t150;
    t188 = f.*t186;
    t189 = f.*t187;
    t190 = t185.*u0;
    t191 = t185.*v0;
    t230 = t95+t103+t127+t134+t135+t149;
    t234 = t180+t197+t224;
    t235 = t179+t203+t222;
    t238 = t154+t226+t227+t233;
    t239 = t176+t178+t195+t204+t220+t229;
    t240 = t175+t177+t202+t217+t218+t228;
    t165 = -t163;
    t166 = -t164;
    t183 = X.*t182;
    t196 = -t189;
    t198 = -t190;
    t231 = 1.0./t230;
    t232 = t231.^2;
    t236 = t161+t162+t184+t196+t198;
    t237 = t165+t166+t183+t188+t191;
    t241 = -t231.*(-t161-t162+t189+t190+Y.*(t129-t137));
    t244 = t231.*(-t161-t162+t189+t190+Y.*(t129-t137));
    t242 = t231.*t237;
    t246 = t244+x;
    t243 = t242+y;
    t247 = sign(t246);
    t245 = sign(t243);
    J_ = reshape([t247.*(t231.*(t235.*u0+X.*(f.*t151-t209.*u0)-Y.*(f.*t205+t199.*u0)-Z.*(f.*t210-t167.*u0)+f.*(-t151.*tx+t205.*ty+t210.*tz))+t232.*(t173-t202-t218+t235).*(-t161-t162+t189+t190+Y.*(t129-t137))),t245.*(t231.*(t235.*v0-X.*(f.*t206+t209.*v0)+Y.*(f.*t168-t199.*v0)-Z.*(f.*t192-t167.*v0)+f.*(t206.*tx-t168.*ty+t192.*tz))+t232.*t237.*(t173-t202-t218+t235)),t247.*(t231.*(t234.*u0+X.*(f.*t170-t193.*u0)-Y.*(f.*t207+t214.*u0)-Z.*(f.*t200-t169.*u0)+f.*(-t170.*tx+t207.*ty+t200.*tz))+t232.*(t174-t195-t220+t234).*(-t161-t162+t189+t190+Y.*(t129-t137))),t245.*(t231.*(t234.*v0-X.*(f.*t208+t193.*v0)+Y.*(f.*t152-t214.*v0)-Z.*(f.*t213-t169.*v0)+f.*(t208.*tx-t152.*ty+t213.*tz))+t232.*t237.*(t174-t195-t220+t234)),t247.*(t231.*(t233.*u0+X.*(f.*t172-t211.*u0)-Y.*(f.*t194+t216.*u0)-Z.*(f.*t212-t153.*u0)+f.*(-t172.*tx+t194.*ty+t212.*tz))+t232.*t238.*(-t161-t162+t189+t190+Y.*(t129-t137))),t245.*(t231.*(t233.*v0-X.*(f.*t201+t211.*v0)+Y.*(f.*t171-t216.*v0)-Z.*(f.*t215-t153.*v0)+f.*(t201.*tx-t171.*ty+t215.*tz))+t232.*t237.*t238),t247.*(t158.*t231+t132.*t232.*(-t161-t162+t189+t190+Y.*(t129-t137))),-t245.*(t182.*t231-t132.*t232.*t237),-t247.*(t231.*(t129-t137)+t120.*t232.*(-t161-t162+t189+t190+Y.*(t129-t137))),t245.*(t160.*t231-t120.*t232.*t237),t247.*(t157.*t231+t83.*t232.*(-t161-t162+t189+t190+Y.*(t129-t137))),t245.*(t159.*t231+t83.*t232.*t237)],[2,6]);
    J = [J; J_];
end